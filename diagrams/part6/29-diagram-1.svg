<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
  <!-- Environment (top) -->
  <rect x="50" y="30" width="700" height="80" fill="#F5F5F5" stroke="#999" stroke-width="2" rx="5"/>
  <text x="400" y="60" text-anchor="middle" font-size="16" font-weight="bold" fill="#333">Environment</text>
  <text x="400" y="85" text-anchor="middle" font-size="12" fill="#666">(User, Tools, APIs, External State)</text>

  <!-- Central Agent Box -->
  <rect x="250" y="180" width="300" height="250" fill="#E8F5E9" stroke="#388E3C" stroke-width="3" rx="10"/>
  <text x="400" y="210" text-anchor="middle" font-size="18" font-weight="bold" fill="#2E7D32">Agent (Language Model)</text>

  <!-- Agent Components -->
  <!-- Perception -->
  <rect x="270" y="230" width="120" height="50" fill="#BBDEFB" stroke="#1565C0" stroke-width="2" rx="5"/>
  <text x="330" y="250" text-anchor="middle" font-size="12" font-weight="bold">Perception</text>
  <text x="330" y="267" text-anchor="middle" font-size="10">Process input</text>

  <!-- Reasoning -->
  <rect x="410" y="230" width="120" height="50" fill="#FFF9C4" stroke="#F57C00" stroke-width="2" rx="5"/>
  <text x="470" y="250" text-anchor="middle" font-size="12" font-weight="bold">Reasoning</text>
  <text x="470" y="267" text-anchor="middle" font-size="10">Decide action</text>

  <!-- Action -->
  <rect x="270" y="300" width="120" height="50" fill="#FFCCBC" stroke="#D84315" stroke-width="2" rx="5"/>
  <text x="330" y="320" text-anchor="middle" font-size="12" font-weight="bold">Action</text>
  <text x="330" y="337" text-anchor="middle" font-size="10">Execute</text>

  <!-- Memory -->
  <rect x="410" y="300" width="120" height="50" fill="#E1BEE7" stroke="#7B1FA2" stroke-width="2" rx="5"/>
  <text x="470" y="320" text-anchor="middle" font-size="12" font-weight="bold">Memory</text>
  <text x="470" y="337" text-anchor="middle" font-size="10">State &amp; history</text>

  <!-- Planning -->
  <rect x="340" y="370" width="120" height="50" fill="#C5CAE9" stroke="#3949AB" stroke-width="2" rx="5"/>
  <text x="400" y="390" text-anchor="middle" font-size="12" font-weight="bold">Planning</text>
  <text x="400" y="407" text-anchor="middle" font-size="10">Goal tracking</text>

  <!-- Arrows -->
  <defs>
    <marker id="arrowhead-agent" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666"/>
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#388E3C"/>
    </marker>
  </defs>

  <!-- Environment to Perception -->
  <line x1="330" y1="110" x2="330" y2="225" stroke="#666" stroke-width="3" marker-end="url(#arrowhead-agent)"/>
  <text x="350" y="160" text-anchor="start" font-size="11" fill="#666" font-weight="bold">Observations</text>

  <!-- Action to Environment -->
  <line x1="330" y1="350" x2="200" y2="115" stroke="#388E3C" stroke-width="3" marker-end="url(#arrowhead-green)"/>
  <text x="220" y="220" text-anchor="start" font-size="11" fill="#388E3C" font-weight="bold">Actions</text>

  <!-- Internal connections (dashed) -->
  <path d="M 390 255 L 410 255" stroke="#999" stroke-width="2" stroke-dasharray="4,2" marker-end="url(#arrowhead-agent)"/>
  <path d="M 470 280 L 470 295" stroke="#999" stroke-width="2" stroke-dasharray="4,2" marker-end="url(#arrowhead-agent)"/>
  <path d="M 410 325 L 390 325" stroke="#999" stroke-width="2" stroke-dasharray="4,2" marker-end="url(#arrowhead-agent)"/>
  <path d="M 400 365 L 400 350" stroke="#999" stroke-width="2" stroke-dasharray="4,2" marker-end="url(#arrowhead-agent)"/>

  <!-- Loop indicator -->
  <path d="M 560 300 Q 600 300 600 255 Q 600 210 560 210" stroke="#D84315" stroke-width="3" fill="none" marker-end="url(#arrowhead-agent)"/>
  <text x="615" y="260" text-anchor="start" font-size="12" fill="#D84315" font-weight="bold">Loop</text>

  <!-- Labels -->
  <text x="400" y="475" text-anchor="middle" font-size="11" fill="#666">Observe → Reason → Act → Update → Repeat</text>
</svg>
