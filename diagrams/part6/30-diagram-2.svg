<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 800 450" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-size="16" font-weight="bold" fill="#333">Planning with Long-Term Memory</text>

  <!-- Current task (top) -->
  <rect x="300" y="60" width="200" height="50" fill="#E3F2FD" stroke="#1976D2" stroke-width="2" rx="5"/>
  <text x="400" y="82" text-anchor="middle" font-size="13" font-weight="bold">Current Task</text>
  <text x="400" y="99" text-anchor="middle" font-size="11" fill="#555">"Book flight to Paris"</text>

  <!-- Memory retrieval (left) -->
  <rect x="50" y="180" width="180" height="140" fill="#FFF9C4" stroke="#F57C00" stroke-width="2" rx="5"/>
  <text x="140" y="205" text-anchor="middle" font-size="12" font-weight="bold">Retrieved Memories</text>
  <text x="140" y="235" text-anchor="middle" font-size="10" fill="#555">• Previous trips</text>
  <text x="140" y="255" text-anchor="middle" font-size="10" fill="#555">• Travel preferences</text>
  <text x="140" y="275" text-anchor="middle" font-size="10" fill="#555">• Past booking issues</text>
  <text x="140" y="295" text-anchor="middle" font-size="10" fill="#555">• Successful strategies</text>

  <!-- Planning agent (center) -->
  <rect x="280" y="180" width="240" height="140" fill="#C8E6C9" stroke="#388E3C" stroke-width="3" rx="8"/>
  <text x="400" y="210" text-anchor="middle" font-size="14" font-weight="bold">Agent Planning</text>
  <text x="400" y="240" text-anchor="middle" font-size="11">1. Recall relevant experiences</text>
  <text x="400" y="260" text-anchor="middle" font-size="11">2. Adapt successful strategies</text>
  <text x="400" y="280" text-anchor="middle" font-size="11">3. Avoid past mistakes</text>
  <text x="400" y="300" text-anchor="middle" font-size="11">4. Execute improved plan</text>

  <!-- New memories (right) -->
  <rect x="570" y="180" width="180" height="140" fill="#E1BEE7" stroke="#7B1FA2" stroke-width="2" rx="5"/>
  <text x="660" y="205" text-anchor="middle" font-size="12" font-weight="bold">New Memories Stored</text>
  <text x="660" y="235" text-anchor="middle" font-size="10" fill="#555">• Flight booked</text>
  <text x="660" y="255" text-anchor="middle" font-size="10" fill="#555">• Price paid: €450</text>
  <text x="660" y="275" text-anchor="middle" font-size="10" fill="#555">• Airline: Air France</text>
  <text x="660" y="295" text-anchor="middle" font-size="10" fill="#555">• What worked well</text>

  <!-- Execution outcome (bottom) -->
  <rect x="300" y="370" width="200" height="50" fill="#C5E1A5" stroke="#558B2F" stroke-width="2" rx="5"/>
  <text x="400" y="392" text-anchor="middle" font-size="13" font-weight="bold">Task Complete</text>
  <text x="400" y="409" text-anchor="middle" font-size="11" fill="#555">Flight booked successfully</text>

  <!-- Arrows -->
  <defs>
    <marker id="arrowhead-plan2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666"/>
    </marker>
  </defs>

  <!-- Task to retrieval -->
  <line x1="350" y1="110" x2="200" y2="175" stroke="#666" stroke-width="2" marker-end="url(#arrowhead-plan2)"/>
  <text x="250" y="140" text-anchor="middle" font-size="10" fill="#666">Query memory</text>

  <!-- Task to planning -->
  <line x1="400" y1="110" x2="400" y2="175" stroke="#666" stroke-width="2" marker-end="url(#arrowhead-plan2)"/>

  <!-- Retrieval to planning -->
  <line x1="230" y1="250" x2="275" y2="250" stroke="#F57C00" stroke-width="2" marker-end="url(#arrowhead-plan2)"/>
  <text x="250" y="240" text-anchor="middle" font-size="9" fill="#F57C00">Inform</text>

  <!-- Planning to execution -->
  <line x1="400" y1="320" x2="400" y2="365" stroke="#666" stroke-width="2" marker-end="url(#arrowhead-plan2)"/>

  <!-- Planning to new memories -->
  <line x1="520" y1="250" x2="565" y2="250" stroke="#7B1FA2" stroke-width="2" marker-end="url(#arrowhead-plan2)"/>
  <text x="543" y="240" text-anchor="middle" font-size="9" fill="#7B1FA2">Store</text>

  <!-- Execution to memories (feedback) -->
  <path d="M 500 395 L 660 395 L 660 325" stroke="#558B2F" stroke-width="2" stroke-dasharray="4,2" marker-end="url(#arrowhead-plan2)"/>
  <text x="570" y="387" text-anchor="middle" font-size="9" fill="#558B2F">Update</text>

  <!-- Memory cycle indicator -->
  <path d="M 100 330 Q 50 360 80 390" stroke="#D84315" stroke-width="2.5" fill="none" marker-end="url(#arrowhead-plan2)"/>
  <text x="30" y="370" text-anchor="start" font-size="11" fill="#D84315" font-weight="bold">Continuous</text>
  <text x="30" y="385" text-anchor="start" font-size="11" fill="#D84315" font-weight="bold">improvement</text>
</svg>