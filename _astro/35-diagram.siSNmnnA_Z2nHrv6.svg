<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-size="18" font-weight="bold" fill="#333">Safety Architecture: Multiple Layers of Guardrails</text>

  <!-- User Input -->
  <rect x="50" y="80" width="150" height="60" fill="#E3F2FD" stroke="#1976D2" stroke-width="2" rx="5"/>
  <text x="125" y="105" text-anchor="middle" font-size="14" font-weight="bold">User Input</text>
  <text x="125" y="125" text-anchor="middle" font-size="11" fill="#555">(Query/Prompt)</text>

  <!-- Layer 1: Input Filter -->
  <rect x="250" y="80" width="150" height="60" fill="#FFF9C4" stroke="#F57C00" stroke-width="2" rx="5"/>
  <text x="325" y="105" text-anchor="middle" font-size="13" font-weight="bold">Input Filter</text>
  <text x="325" y="125" text-anchor="middle" font-size="10" fill="#555">Jailbreak detection,</text>
  <text x="325" y="138" text-anchor="middle" font-size="10" fill="#555">offensive content block</text>

  <!-- Layer 2: Model with Safety Training -->
  <rect x="250" y="180" width="150" height="80" fill="#C8E6C9" stroke="#388E3C" stroke-width="3" rx="5"/>
  <text x="325" y="210" text-anchor="middle" font-size="14" font-weight="bold">Language Model</text>
  <text x="325" y="230" text-anchor="middle" font-size="10" fill="#555">+ Safety training</text>
  <text x="325" y="245" text-anchor="middle" font-size="10" fill="#555">+ Refusal capability</text>

  <!-- Layer 3: Output Filter -->
  <rect x="250" y="300" width="150" height="60" fill="#FFCCBC" stroke="#D84315" stroke-width="2" rx="5"/>
  <text x="325" y="325" text-anchor="middle" font-size="13" font-weight="bold">Output Filter</text>
  <text x="325" y="345" text-anchor="middle" font-size="10" fill="#555">Toxicity check,</text>
  <text x="325" y="358" text-anchor="middle" font-size="10" fill="#555">factuality verification</text>

  <!-- Layer 4: Monitoring -->
  <rect x="450" y="80" width="150" height="280" fill="#E1BEE7" stroke="#7B1FA2" stroke-width="2" rx="5"/>
  <text x="525" y="110" text-anchor="middle" font-size="14" font-weight="bold">Monitoring</text>
  <text x="525" y="140" text-anchor="middle" font-size="11" fill="#555">• Log all interactions</text>
  <text x="525" y="160" text-anchor="middle" font-size="11" fill="#555">• Detect anomalies</text>
  <text x="525" y="180" text-anchor="middle" font-size="11" fill="#555">• Track failure rates</text>
  <text x="525" y="200" text-anchor="middle" font-size="11" fill="#555">• Alert on violations</text>
  <text x="525" y="230" text-anchor="middle" font-size="12" font-weight="bold">Human Oversight</text>
  <text x="525" y="250" text-anchor="middle" font-size="11" fill="#555">• Review flagged cases</text>
  <text x="525" y="270" text-anchor="middle" font-size="11" fill="#555">• Manual intervention</text>
  <text x="525" y="290" text-anchor="middle" font-size="11" fill="#555">• Policy updates</text>
  <text x="525" y="320" text-anchor="middle" font-size="12" font-weight="bold">Circuit Breaker</text>
  <text x="525" y="340" text-anchor="middle" font-size="11" fill="#555">• Auto-disable on failure</text>

  <!-- Final Output -->
  <rect x="250" y="400" width="150" height="60" fill="#C5E1A5" stroke="#558B2F" stroke-width="2" rx="5"/>
  <text x="325" y="425" text-anchor="middle" font-size="14" font-weight="bold">Safe Output</text>
  <text x="325" y="445" text-anchor="middle" font-size="11" fill="#555">(Delivered to user)</text>

  <!-- Arrows -->
  <defs>
    <marker id="arrowhead-safe" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666"/>
    </marker>
  </defs>

  <line x1="200" y1="110" x2="245" y2="110" stroke="#666" stroke-width="2" marker-end="url(#arrowhead-safe)"/>
  <line x1="325" y1="140" x2="325" y2="175" stroke="#666" stroke-width="2" marker-end="url(#arrowhead-safe)"/>
  <line x1="325" y1="260" x2="325" y2="295" stroke="#666" stroke-width="2" marker-end="url(#arrowhead-safe)"/>
  <line x1="325" y1="360" x2="325" y2="395" stroke="#666" stroke-width="2" marker-end="url(#arrowhead-safe)"/>

  <!-- Monitoring connections (dashed) -->
  <line x1="405" y1="110" x2="445" y2="150" stroke="#7B1FA2" stroke-width="2" stroke-dasharray="4,2"/>
  <line x1="405" y1="220" x2="445" y2="220" stroke="#7B1FA2" stroke-width="2" stroke-dasharray="4,2"/>
  <line x1="405" y1="330" x2="445" y2="290" stroke="#7B1FA2" stroke-width="2" stroke-dasharray="4,2"/>

  <!-- Labels -->
  <text x="400" y="485" text-anchor="middle" font-size="11" fill="#666">Defense in depth: Multiple independent safety mechanisms</text>
</svg>