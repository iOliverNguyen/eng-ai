<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
  <!-- User Query -->
  <rect x="250" y="20" width="200" height="50" fill="#E3F2FD" stroke="#1976D2" stroke-width="2" rx="5"/>
  <text x="350" y="50" text-anchor="middle" font-size="13" font-weight="bold">User: Trip to London advice?</text>

  <!-- LLM Brain -->
  <rect x="275" y="110" width="150" height="60" fill="#C8E6C9" stroke="#388E3C" stroke-width="2" rx="5"/>
  <text x="350" y="135" text-anchor="middle" font-size="14" font-weight="bold">Language Model</text>
  <text x="350" y="155" text-anchor="middle" font-size="11">(Orchestrator)</text>

  <!-- Tool 1: Weather -->
  <rect x="50" y="240" width="150" height="60" fill="#BBDEFB" stroke="#1565C0" stroke-width="2" rx="5"/>
  <text x="125" y="265" text-anchor="middle" font-size="12" font-weight="bold">get_weather</text>
  <text x="125" y="285" text-anchor="middle" font-size="10" fill="#555">forecast(London, 7d)</text>

  <!-- Tool 2: Search -->
  <rect x="275" y="240" width="150" height="60" fill="#BBDEFB" stroke="#1565C0" stroke-width="2" rx="5"/>
  <text x="350" y="265" text-anchor="middle" font-size="12" font-weight="bold">web_search</text>
  <text x="350" y="285" text-anchor="middle" font-size="10" fill="#555">"London events"</text>

  <!-- Tool 3: Currency -->
  <rect x="500" y="240" width="150" height="60" fill="#BBDEFB" stroke="#1565C0" stroke-width="2" rx="5"/>
  <text x="575" y="265" text-anchor="middle" font-size="12" font-weight="bold">exchange_rate</text>
  <text x="575" y="285" text-anchor="middle" font-size="10" fill="#555">USD → GBP</text>

  <!-- Results -->
  <rect x="50" y="360" width="150" height="50" fill="#C5E1A5" stroke="#558B2F" stroke-width="2" rx="5"/>
  <text x="125" y="380" text-anchor="middle" font-size="10">Rainy, 12-16°C</text>
  <text x="125" y="395" text-anchor="middle" font-size="10">Pack rain gear</text>

  <rect x="275" y="360" width="150" height="50" fill="#C5E1A5" stroke="#558B2F" stroke-width="2" rx="5"/>
  <text x="350" y="380" text-anchor="middle" font-size="10">Marathon Sat</text>
  <text x="350" y="395" text-anchor="middle" font-size="10">Museum shows</text>

  <rect x="500" y="360" width="150" height="50" fill="#C5E1A5" stroke="#558B2F" stroke-width="2" rx="5"/>
  <text x="575" y="380" text-anchor="middle" font-size="10">1 USD = 0.79 GBP</text>
  <text x="575" y="395" text-anchor="middle" font-size="10">Budget ~£80/day</text>

  <!-- Final Response -->
  <rect x="200" y="450" width="300" height="40" fill="#FFF9C4" stroke="#F57C00" stroke-width="2" rx="5"/>
  <text x="350" y="475" text-anchor="middle" font-size="11" font-weight="bold">Synthesized Response to User</text>

  <!-- Arrows -->
  <defs>
    <marker id="arrowhead-multi" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666"/>
    </marker>
  </defs>

  <!-- Query to LLM -->
  <line x1="350" y1="70" x2="350" y2="105" stroke="#666" stroke-width="2" marker-end="url(#arrowhead-multi)"/>

  <!-- LLM to Tools (parallel) -->
  <path d="M 300 170 L 125 235" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead-multi)"/>
  <path d="M 350 170 L 350 235" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead-multi)"/>
  <path d="M 400 170 L 575 235" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead-multi)"/>

  <!-- Tools to Results -->
  <line x1="125" y1="300" x2="125" y2="355" stroke="#666" stroke-width="2" marker-end="url(#arrowhead-multi)"/>
  <line x1="350" y1="300" x2="350" y2="355" stroke="#666" stroke-width="2" marker-end="url(#arrowhead-multi)"/>
  <line x1="575" y1="300" x2="575" y2="355" stroke="#666" stroke-width="2" marker-end="url(#arrowhead-multi)"/>

  <!-- Results back to LLM (conceptual) -->
  <path d="M 125 410 L 125 430 L 260 430" stroke="#666" stroke-width="2" stroke-dasharray="5,5" fill="none"/>
  <path d="M 350 410 L 350 430 L 330 430" stroke="#666" stroke-width="2" stroke-dasharray="5,5" fill="none"/>
  <path d="M 575 410 L 575 430 L 440 430" stroke="#666" stroke-width="2" stroke-dasharray="5,5" fill="none"/>

  <!-- Final synthesis -->
  <line x1="350" y1="430" x2="350" y2="445" stroke="#666" stroke-width="2" marker-end="url(#arrowhead-multi)"/>

  <!-- Labels -->
  <text x="230" y="155" text-anchor="end" font-size="10" fill="#666">Parallel</text>
  <text x="230" y="168" text-anchor="end" font-size="10" fill="#666">tool calls</text>

  <text x="150" y="425" text-anchor="middle" font-size="9" fill="#666">Results synthesized</text>
</svg>